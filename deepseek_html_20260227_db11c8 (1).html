<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§ñ‡§æ‡§¶‡•ç‡§Ø ‡§ï‡§æ‡§∞‡•ç‡§° ‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø ‚Äì ‡§¶‡•Ä‡§™‡§ï & ‡§ú‡§ó‡§¶‡•Ä‡§∂ (50-50)</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, sans-serif;
        }
        body {
            background: #f3f2ef;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }
        .container {
            max-width: 1200px;
            width: 100%;
            background: white;
            border-radius: 28px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 30px;
        }
        h1 {
            margin-top: 0;
            color: #1e3c3f;
            font-weight: 600;
            font-size: 2.2rem;
            border-left: 8px solid #e67e22;
            padding-left: 20px;
        }
        .subhead {
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 1.2rem;
            background: #fef5e7;
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-block;
        }
        .card {
            background: #f9fafc;
            border-radius: 24px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: inset 0 2px 6px rgba(0,0,0,0.02), 0 8px 20px rgba(0,20,30,0.05);
        }
        .flex-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: flex-end;
        }
        .input-group {
            flex: 1 1 180px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .input-group label {
            font-weight: 600;
            color: #1e3c3f;
            font-size: 0.9rem;
            letter-spacing: 0.3px;
        }
        .input-group input, .input-group select, .input-group button {
            padding: 12px 16px;
            border: 2px solid #d5dce3;
            border-radius: 40px;
            font-size: 1rem;
            background: white;
            transition: 0.2s;
        }
        .input-group input:focus, .input-group select:focus {
            border-color: #e67e22;
            outline: none;
            box-shadow: 0 0 0 3px rgba(230,126,34,0.2);
        }
        button {
            background: #e67e22;
            color: white;
            font-weight: 700;
            border: none;
            cursor: pointer;
            border-radius: 40px;
            padding: 12px 24px;
            font-size: 1rem;
            border: 2px solid transparent;
        }
        button:hover {
            background: #cf6c17;
            transform: scale(1.02);
        }
        .btn-secondary {
            background: #34495e;
        }
        .btn-secondary:hover {
            background: #2c3e50;
        }
        .btn-danger {
            background: #b03a2e;
        }
        .btn-danger:hover {
            background: #942c21;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
        }
        th {
            background: #1e3c3f;
            color: white;
            font-weight: 600;
            padding: 14px 8px;
            text-align: center;
        }
        td {
            padding: 12px 8px;
            border-bottom: 1px solid #e2e9f0;
            text-align: center;
        }
        .delete-btn {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 30px;
            padding: 6px 14px;
            font-size: 0.8rem;
            cursor: pointer;
            font-weight: 600;
        }
        .delete-btn:hover {
            background: #c0392b;
        }
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        .summary-box {
            background: white;
            border-radius: 20px;
            padding: 22px 18px;
            box-shadow: 0 6px 14px rgba(0,20,30,0.05);
            border: 1px solid #e7edf3;
        }
        .summary-box h3 {
            margin: 0 0 12px 0;
            color: #2c3e50;
            font-size: 1.3rem;
            border-bottom: 2px dashed #e67e22;
            padding-bottom: 8px;
        }
        .amount {
            font-size: 2rem;
            font-weight: 800;
            color: #1e3c3f;
        }
        .small-note {
            font-size: 0.9rem;
            color: #5f6b7a;
            margin-top: 8px;
        }
        .settlement {
            background: #eef9f2;
            border-left: 8px solid #27ae60;
            padding: 18px 25px;
            border-radius: 18px;
            font-size: 1.4rem;
            font-weight: 600;
            color: #1e3c3f;
        }
        .footer-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }
        .month-picker {
            display: flex;
            gap: 15px;
            align-items: center;
            background: #eef2f6;
            padding: 12px 25px;
            border-radius: 50px;
        }
        .month-picker label {
            font-weight: 600;
            color: #1e3c3f;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>üçΩÔ∏è ‡§¶‡•Ä‡§™‡§ï & ‡§ú‡§ó‡§¶‡•Ä‡§∂ ¬∑ ‡§´‡•Ç‡§° ‡§ï‡§æ‡§∞‡•ç‡§° ‡§¨‡§ø‡§ú‡§º‡§®‡•á‡§∏</h1>
    <div class="subhead">‚úÖ 50% ‚Äì 50% ‡§∏‡§æ‡§ù‡•á‡§¶‡§æ‡§∞‡•Ä ¬∑ ‡§π‡§∞ ‡§Æ‡§π‡•Ä‡§®‡•á ‡§¨‡§∞‡§æ‡§¨‡§∞ ‡§¨‡§Å‡§ü‡§µ‡§æ‡§∞‡§æ</div>

    <!-- ‡§®‡§Ø‡§æ ‡§≤‡•á‡§®-‡§¶‡•á‡§® ‡§´‡•â‡§∞‡•ç‡§Æ -->
    <div class="card">
        <h2 style="margin-top:0; color:#1e3c3f;">‚ûï ‡§®‡§Ø‡§æ ‡§≤‡•á‡§®-‡§¶‡•á‡§® ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</h2>
        <div class="flex-row">
            <div class="input-group">
                <label>üìÖ ‡§§‡§æ‡§∞‡•Ä‡§ñ</label>
                <input type="date" id="txnDate" value="">
            </div>
            <div class="input-group">
                <label>üìù ‡§µ‡§ø‡§µ‡§∞‡§£</label>
                <input type="text" id="txnDesc" placeholder="‡§ú‡•à‡§∏‡•á ‡§∏‡§Æ‡§æ‡§®, ‡§ö‡§æ‡§Ø, ‡§ï‡§ø‡§∞‡§æ‡§Ø‡§æ...">
            </div>
            <div class="input-group">
                <label>üí∞ ‡§∞‡§æ‡§∂‡§ø (‚Çπ)</label>
                <input type="number" id="txnAmount" step="1" min="1" placeholder="0">
            </div>
            <div class="input-group">
                <label>üîÅ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞</label>
                <select id="txnType">
                    <option value="expense">‡§ñ‡§∞‡•ç‡§ö‡§æ (Expense)</option>
                    <option value="income">‡§Ü‡§Æ‡§¶‡§®‡•Ä (Income)</option>
                </select>
            </div>
            <div class="input-group">
                <label>üë§ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø</label>
                <select id="txnPerson">
                    <option value="Deepak">‡§¶‡•Ä‡§™‡§ï (Deepak)</option>
                    <option value="Jagdish">‡§ú‡§ó‡§¶‡•Ä‡§∂ (Jagdish)</option>
                </select>
            </div>
            <div class="input-group">
                <button id="addBtn">‚ûï ‡§≤‡•á‡§®-‡§¶‡•á‡§® ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</button>
            </div>
        </div>
    </div>

    <!-- ‡§Æ‡§π‡•Ä‡§®‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§∏‡§æ‡§∞‡§æ‡§Ç‡§∂ -->
    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; margin-bottom: 15px;">
        <div class="month-picker">
            <label>üìÜ ‡§Æ‡§π‡•Ä‡§®‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç:</label>
            <input type="month" id="monthSelector" value="">
            <button id="calcBtn" class="btn-secondary">‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç</button>
        </div>
        <button id="clearAllBtn" class="btn-danger" style="background:#7f8c8d;">üóëÔ∏è ‡§∏‡§≠‡•Ä ‡§°‡•á‡§ü‡§æ ‡§Æ‡§ø‡§ü‡§æ‡§è‡§Å</button>
    </div>

    <!-- ‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡§æ ‡§π‡§ø‡§∏‡§æ‡§¨ (‡§°‡§æ‡§Ø‡§®‡§æ‡§Æ‡§ø‡§ï) -->
    <div class="card" style="background: #e9f0f5;">
        <h2 style="margin:0 0 10px 0;">üìä ‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡§æ ‡§®‡§§‡•Ä‡§ú‡§æ (‡§ö‡•Å‡§®‡•á ‡§π‡•Å‡§è ‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è)</h2>
        <div class="summary-grid" id="summaryBoxes">
            <!-- JS fill karega -->
        </div>
        <div id="settlementMessage" class="settlement">
            ‚è≥ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡§π‡•Ä‡§®‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ '‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç' ‡§¶‡§¨‡§æ‡§è‡§Å
        </div>
    </div>

    <!-- ‡§∏‡§≠‡•Ä ‡§≤‡•á‡§®-‡§¶‡•á‡§® ‡§ï‡•Ä ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ -->
    <h2 style="margin-bottom: 10px;">üìã ‡§™‡•Ç‡§∞‡§æ ‡§≤‡•á‡§ú‡§∞ (‡§∏‡§≠‡•Ä ‡§Æ‡§π‡•Ä‡§®‡•á)</h2>
    <div style="overflow-x: auto;">
        <table id="transactionTable">
            <thead>
                <tr>
                    <th>‡§§‡§æ‡§∞‡•Ä‡§ñ</th>
                    <th>‡§µ‡§ø‡§µ‡§∞‡§£</th>
                    <th>‡§∞‡§æ‡§∂‡§ø (‚Çπ)</th>
                    <th>‡§™‡•ç‡§∞‡§ï‡§æ‡§∞</th>
                    <th>‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø</th>
                    <th>‡§π‡§ü‡§æ‡§è‡§Å</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <!-- JS rows -->
            </tbody>
        </table>
    </div>
    <p style="color:#5f6b7a; font-size:0.9rem;">* ‡§∏‡§æ‡§∞‡§æ ‡§°‡•á‡§ü‡§æ ‡§Ü‡§™‡§ï‡•á ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§Æ‡•á‡§Ç ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§π‡§§‡§æ ‡§π‡•à (Local Storage)</p>
</div>

<script>
    (function() {
        // Storage key
        const STORAGE_KEY = 'food_card_partnership';

        // Sample initial data (if storage empty)
        const defaultTxns = [
            { id: Date.now()-100000, date: '2025-03-02', description: '‡§∏‡§Æ‡§æ‡§® (‡§Ü‡§ü‡§æ, ‡§§‡•á‡§≤)', amount: 1200, type: 'expense', person: 'Deepak' },
            { id: Date.now()-200000, date: '2025-03-03', description: '‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä - ‡§ö‡§æ‡§Ø', amount: 800, type: 'income', person: 'Jagdish' },
            { id: Date.now()-300000, date: '2025-03-05', description: '‡§∏‡§Æ‡§æ‡§® (‡§∏‡§¨‡•ç‡§ú‡•Ä)', amount: 600, type: 'expense', person: 'Jagdish' },
            { id: Date.now()-400000, date: '2025-03-07', description: '‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä - ‡§∏‡§Æ‡•ã‡§∏‡§æ', amount: 1500, type: 'income', person: 'Deepak' },
            { id: Date.now()-500000, date: '2025-03-10', description: '‡§ó‡•à‡§∏ ‡§∏‡§ø‡§≤‡•á‡§Ç‡§°‡§∞', amount: 950, type: 'expense', person: 'Deepak' },
        ];

        // Load transactions from localStorage or default
        let transactions = [];
        function loadTransactions() {
            const stored = localStorage.getItem(STORAGE_KEY);
            if (stored) {
                try {
                    transactions = JSON.parse(stored);
                } catch (e) {
                    transactions = [...defaultTxns];
                }
            } else {
                transactions = [...defaultTxns];
            }
            // sort by date (newest first for display? but we'll keep as is, can sort in table)
            transactions.sort((a,b) => a.date.localeCompare(b.date) || a.id - b.id);
        }
        function saveTransactions() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(transactions));
        }

        // Helper to format currency
        const formatMoney = (amt) => '‚Çπ' + amt.toLocaleString('en-IN');

        // Render table
        function renderTable() {
            const tbody = document.getElementById('tableBody');
            if (!tbody) return;
            if (transactions.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="padding:30px; text-align:center; color:#888;">‡§Ö‡§≠‡•Ä ‡§ï‡•ã‡§à ‡§≤‡•á‡§®-‡§¶‡•á‡§® ‡§®‡§π‡•Ä‡§Ç‡•§ ‡§ä‡§™‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§</td></tr>';
                return;
            }
            let html = '';
            // show latest first? let's sort descending by date then id
            const sorted = [...transactions].sort((a,b) => b.date.localeCompare(a.date) || b.id - a.id);
            sorted.forEach(txn => {
                const typeText = txn.type === 'expense' ? 'üßæ ‡§ñ‡§∞‡•ç‡§ö‡§æ' : 'üí∞ ‡§Ü‡§Æ‡§¶‡§®‡•Ä';
                const personName = txn.person === 'Deepak' ? '‡§¶‡•Ä‡§™‡§ï' : '‡§ú‡§ó‡§¶‡•Ä‡§∂';
                html += `<tr>
                    <td>${txn.date}</td>
                    <td>${txn.description}</td>
                    <td>${formatMoney(txn.amount)}</td>
                    <td>${typeText}</td>
                    <td>${personName}</td>
                    <td><button class="delete-btn" data-id="${txn.id}">‡§π‡§ü‡§æ‡§è‡§Å</button></td>
                </tr>`;
            });
            tbody.innerHTML = html;
            // Attach delete events
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = Number(e.target.dataset.id);
                    transactions = transactions.filter(t => t.id !== id);
                    saveTransactions();
                    renderTable();
                    // clear summary or re-calc if month selected
                    const monthVal = document.getElementById('monthSelector').value;
                    if (monthVal) calculateForMonth(monthVal);
                });
            });
        }

        // Calculate for given month (YYYY-MM)
        function calculateForMonth(monthStr) {
            if (!monthStr) {
                document.getElementById('settlementMessage').innerText = '‚ö†Ô∏è ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡§π‡•Ä‡§®‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§';
                document.getElementById('summaryBoxes').innerHTML = '';
                return;
            }
            const [year, month] = monthStr.split('-').map(Number);
            const filtered = transactions.filter(t => {
                const [y, m] = t.date.split('-').map(Number);
                return y === year && m === month;
            });

            // Totals
            let totalExpense = 0, totalIncome = 0;
            let deepakExpense = 0, deepakIncome = 0;
            let jagdishExpense = 0, jagdishIncome = 0;

            filtered.forEach(t => {
                if (t.type === 'expense') {
                    totalExpense += t.amount;
                    if (t.person === 'Deepak') deepakExpense += t.amount;
                    else jagdishExpense += t.amount;
                } else {
                    totalIncome += t.amount;
                    if (t.person === 'Deepak') deepakIncome += t.amount;
                    else jagdishIncome += t.amount;
                }
            });

            const netProfit = totalIncome - totalExpense;
            const halfProfit = netProfit / 2;

            // Net per partner (income - expense)
            const deepakNet = deepakIncome - deepakExpense;
            const jagdishNet = jagdishIncome - jagdishExpense;

            // Settlement: deepak should get (halfProfit - deepakNet) from jagdish (if positive)
            const deepakAdjustment = halfProfit - deepakNet;
            let settlementText = '';
            if (Math.abs(deepakAdjustment) < 0.5) {
                settlementText = '‚úÖ ‡§ï‡•ã‡§à ‡§≤‡•á‡§®-‡§¶‡•á‡§® ‡§®‡§π‡•Ä‡§Ç, ‡§¨‡§∞‡§æ‡§¨‡§∞ ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§';
            } else if (deepakAdjustment > 0) {
                settlementText = `üîÅ ‡§ú‡§ó‡§¶‡•Ä‡§∂ ‡§ï‡•ã ‡§¶‡•Ä‡§™‡§ï ‡§ï‡•ã ‡§¶‡•á‡§®‡§æ ‡§π‡•ã‡§ó‡§æ: ${formatMoney(deepakAdjustment)} (‡§¶‡•Ä‡§™‡§ï ‡§ï‡•ã ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ)`;
            } else {
                settlementText = `üîÅ ‡§¶‡•Ä‡§™‡§ï ‡§ï‡•ã ‡§ú‡§ó‡§¶‡•Ä‡§∂ ‡§ï‡•ã ‡§¶‡•á‡§®‡§æ ‡§π‡•ã‡§ó‡§æ: ${formatMoney(-deepakAdjustment)} (‡§ú‡§ó‡§¶‡•Ä‡§∂ ‡§ï‡•ã ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ)`;
            }

            // Update summary boxes
            const summaryHtml = `
                <div class="summary-box">
                    <h3>üí∞ ‡§ï‡•Å‡§≤ ‡§Ü‡§Æ‡§¶‡§®‡•Ä</h3>
                    <div class="amount">${formatMoney(totalIncome)}</div>
                    <div class="small-note">‡§¶‡•Ä‡§™‡§ï: ${formatMoney(deepakIncome)} | ‡§ú‡§ó‡§¶‡•Ä‡§∂: ${formatMoney(jagdishIncome)}</div>
                </div>
                <div class="summary-box">
                    <h3>üßæ ‡§ï‡•Å‡§≤ ‡§ñ‡§∞‡•ç‡§ö‡§æ</h3>
                    <div class="amount">${formatMoney(totalExpense)}</div>
                    <div class="small-note">‡§¶‡•Ä‡§™‡§ï: ${formatMoney(deepakExpense)} | ‡§ú‡§ó‡§¶‡•Ä‡§∂: ${formatMoney(jagdishExpense)}</div>
                </div>
                <div class="summary-box">
                    <h3>üìà ‡§∂‡•Å‡§¶‡•ç‡§ß ‡§≤‡§æ‡§≠/‡§π‡§æ‡§®‡§ø</h3>
                    <div class="amount">${formatMoney(netProfit)}</div>
                    <div class="small-note">50% ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ = ${formatMoney(halfProfit)} ‡§™‡•ç‡§∞‡§§‡§ø ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø</div>
                </div>
                <div class="summary-box">
                    <h3>üë• ‡§®‡•á‡§ü ‡§∏‡•ç‡§•‡§ø‡§§‡§ø</h3>
                    <div class="amount">‡§¶‡•Ä‡§™‡§ï: ${formatMoney(deepakNet)}</div>
                    <div class="amount">‡§ú‡§ó‡§¶‡•Ä‡§∂: ${formatMoney(jagdishNet)}</div>
                </div>
            `;
            document.getElementById('summaryBoxes').innerHTML = summaryHtml;
            document.getElementById('settlementMessage').innerHTML = settlementText;
        }

        // Set today's date in the date picker
        function setDefaultDate() {
            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2,'0');
            const dd = String(today.getDate()).padStart(2,'0');
            document.getElementById('txnDate').value = `${yyyy}-${mm}-${dd}`;
        }

        // Set current month in month picker
        function setCurrentMonth() {
            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2,'0');
            document.getElementById('monthSelector').value = `${yyyy}-${mm}`;
        }

        // Add transaction
        function addTransaction() {
            const date = document.getElementById('txnDate').value;
            const desc = document.getElementById('txnDesc').value.trim();
            const amount = parseFloat(document.getElementById('txnAmount').value);
            const type = document.getElementById('txnType').value;
            const person = document.getElementById('txnPerson').value;

            if (!date) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§ö‡•Å‡§®‡•á‡§Ç');
                return;
            }
            if (!desc) {
                alert('‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
                return;
            }
            if (!amount || amount <= 0) {
                alert('‡§∏‡§π‡•Ä ‡§∞‡§æ‡§∂‡§ø ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§ß‡§®‡§æ‡§§‡•ç‡§Æ‡§ï)');
                return;
            }

            const newTxn = {
                id: Date.now() + Math.random(),
                date,
                description: desc,
                amount,
                type,
                person
            };
            transactions.push(newTxn);
            saveTransactions();
            renderTable();

            // Clear form but keep date and person maybe
            document.getElementById('txnDesc').value = '';
            document.getElementById('txnAmount').value = '';
            document.getElementById('txnType').value = 'expense';
            // Recalculate if month selected
            const monthVal = document.getElementById('monthSelector').value;
            if (monthVal) calculateForMonth(monthVal);
        }

        // Clear all data
        function clearAllData() {
            if (confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§∏‡§ö ‡§Æ‡•á‡§Ç ‡§∏‡§æ‡§∞‡§æ ‡§°‡•á‡§ü‡§æ ‡§Æ‡§ø‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç? ‡§Ø‡§π ‡§µ‡§æ‡§™‡§∏ ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§è‡§ó‡§æ‡•§')) {
                transactions = [];
                saveTransactions();
                renderTable();
                document.getElementById('summaryBoxes').innerHTML = '';
                document.getElementById('settlementMessage').innerText = 'üóëÔ∏è ‡§∏‡§æ‡§∞‡§æ ‡§°‡•á‡§ü‡§æ ‡§Æ‡§ø‡§ü‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§®‡§Ø‡§æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§';
            }
        }

        // Initialization
        window.addEventListener('DOMContentLoaded', () => {
            loadTransactions();
            renderTable();
            setDefaultDate();
            setCurrentMonth();
            // Auto calculate for current month on load
            const monthVal = document.getElementById('monthSelector').value;
            calculateForMonth(monthVal);

            // Event listeners
            document.getElementById('addBtn').addEventListener('click', addTransaction);
            document.getElementById('calcBtn').addEventListener('click', () => {
                const monthVal = document.getElementById('monthSelector').value;
                calculateForMonth(monthVal);
            });
            document.getElementById('clearAllBtn').addEventListener('click', clearAllData);

            // optional: press enter in fields? not needed
        });
    })();
</script>
</body>
</html>